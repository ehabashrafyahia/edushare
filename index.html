<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ù†ØµØ© Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¯Ø±ÙˆØ³ - Ø£. Ø¥ÙŠÙ‡Ø§Ø¨ Ø£Ø´Ø±Ù</title>

<style>
body{
    font-family:Cairo, sans-serif;
    margin:0;
    background:linear-gradient(135deg,#4e73df,#1cc88a);
    text-align:center;
    color:white;
}
header{
    padding:20px;
    font-size:26px;
    font-weight:bold;
}
textarea{
    width:90%;
    height:200px;
    margin:10px;
    padding:10px;
    border-radius:10px;
}
input{
    padding:8px;
    border-radius:10px;
    border:none;
}
button{
    padding:10px 20px;
    margin:10px;
    border:none;
    border-radius:20px;
    cursor:pointer;
    background:#f6c23e;
    font-weight:bold;
}
.lesson-card{
    background:white;
    color:black;
    width:250px;
    margin:10px auto;
    padding:15px;
    border-radius:15px;
    cursor:pointer;
}
.option-btn{
    display:block;
    margin:8px auto;
    padding:8px 15px;
    border:none;
    border-radius:15px;
    cursor:pointer;
    width:200px;
}
.correct{ background:#1cc88a; color:white;}
.wrong{ background:#e74a3b; color:white;}
</style>
</head>

<body>

<header>ğŸ® Ù…Ù†ØµØ© Ø£. Ø¥ÙŠÙ‡Ø§Ø¨ Ø£Ø´Ø±Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</header>

<h3>â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h3>
<input type="text" id="lessonName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¯Ø±Ø³"><br>
<textarea id="questionsInput" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§ Ø¨Ù†ÙØ³ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¹ØªØ§Ø¯"></textarea><br>
<button onclick="saveLesson()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³</button>

<hr>
<h3>ğŸ“š Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
<div id="lessonsList"></div>

<hr>
<div id="gameArea"></div>

<script>
let lessons = JSON.parse(localStorage.getItem("lessons")) || {};
let currentLesson=[];
let currentIndex=0;
let score=0;

function saveLesson(){
    let name=document.getElementById("lessonName").value.trim();
    let raw=document.getElementById("questionsInput").value.trim();
    if(!name || !raw){ alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø©"); return;}

    let blocks=raw.split("\n\n");
    let parsed=[];

    blocks.forEach(block=>{
        let lines=block.split("\n");
        let question=lines[0];
        let options=[];
        let correctIndex=0;

        for(let i=1;i<lines.length;i++){
            let text=lines[i];
            if(text.includes("*")){
                correctIndex=options.length;
                text=text.replace("*","");
            }
            options.push(text);
        }

        parsed.push({question,options,correctIndex});
    });

    lessons[name]=parsed;
    localStorage.setItem("lessons",JSON.stringify(lessons));

    document.getElementById("lessonName").value="";
    document.getElementById("questionsInput").value="";
    loadLessons();
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³ âœ…");
}

function loadLessons(){
    let container=document.getElementById("lessonsList");
    container.innerHTML="";
    for(let name in lessons){
        container.innerHTML+=
        `<div class="lesson-card" onclick="startGame('${name}')">
        ğŸ¯ ${name}
        </div>`;
    }
}

function startGame(name){
    currentLesson=lessons[name];
    currentIndex=0;
    score=0;
    showQuestion();
}

function showQuestion(){
    if(currentIndex>=currentLesson.length){
        document.getElementById("gameArea").innerHTML=
        `ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¯Ø±Ø³!<br>Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score} / ${currentLesson.length*10}`;
        return;
    }

    let q=currentLesson[currentIndex];
    let html=`<h3>${q.question}</h3>`;

    q.options.forEach((opt,i)=>{
        html+=`<button class="option-btn" onclick="checkAnswer(${i})">${opt}</button>`;
    });

    document.getElementById("gameArea").innerHTML=html;
}

function checkAnswer(i){
    let q=currentLesson[currentIndex];
    if(i==q.correctIndex){
        score+=10;
        alert("Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ğŸ‘");
    }else{
        alert("Ø®Ø·Ø£ âŒ");
    }
    currentIndex++;
    showQuestion();
}

loadLessons();
</script>

</body>
</html>
